<!DOCTYPE html>
<html>
  <head>
    <title>2048 Agent</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>
  <body>
    <div class="container">
      <h2 style="text-align: center">Automated 2048</h2>

      <div class="main-interface">
        <div class="device-view">
          <div class="screenshot-container">
            <img id="device-screen" style="display: none" />
          </div>
        </div>
        <div class="control-panel">
          <div class="input-controls">
            <h4
              style="
                background-color: dimgray;
                border-radius: 4px;
                padding: 12px;
                margin: 0;
                text-align: center;
              "
            >
              How should I play this game?
            </h4>
            <div class="text-input">
              <h3 style="margin-top: 0">What are the rules?</h3>
              <div class="text-input-group">
                <textarea
                  id="rules-input"
                  class="prompt-input"
                  placeholder="Enter game rules here..."
                  style="height: 100px"
                >
When two tiles with the same number touch, they merge into one! Try to reach the 2048 tile. The game ends when the board is full and no more merges are possible.</textarea
                >
              </div>
            </div>
            <div class="text-input">
              <h3 style="margin-top: 0">What is your strategy?</h3>
              <div class="text-input-group">
                <textarea
                  id="prompt-input"
                  class="prompt-input"
                  placeholder="Enter prompt here..."
                  style="height: 100px"
                >
Keep the highest value tile in the top left corner. Build a chain of decreasing tiles next to it along the top row. Avoid moving tiles downwards unnecessarily. Fill rows from the top down or side to side towards the corner.</textarea
                >
              </div>
            </div>
          </div>

          <div style="display: flex; flex-direction: column; gap: 8px">
            <button onclick="pollDevice()" id="status-indicator">
              Device Status
            </button>
            <div class="command-buttons">
              <button onclick="eventLoop()" id="device-starter">
                <i class="fas fa-play"></i>
              </button>
              <button
                onclick="stopScreenshotLoop()"
                id="device-stopper"
                disabled
              >
                <i class="fas fa-pause"></i>
              </button>
              <button onclick="screenshotAndMove()" id="one-step">
                <i class="fas fa-right-to-bracket"></i>
              </button>
            </div>
          </div>
        </div>

        <div
          style="
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
            max-width: 600px;
          "
        >
          <div class="reasoning-view">
            <h3>LLM Reasoning Output</h3>
            <pre id="llm-output">No output yet...</pre>
          </div>
          <div style="display: flex; gap: 8px; align-items: center">
            <button style="width: 100px" onclick="previousStep()">
              < Back
            </button>
            <button
              style="width: 125px; display: flex; gap: 8px; flex-direction: row"
              disabled
            >
              <div style="width: 50px">Step:</div>
              <div style="width: 50px" id="step-number">0/0</div>
            </button>
            <button style="width: 100px" onclick="nextStep()">Next ></button>
          </div>
          <div
            style="
              display: flex;
              gap: 8px;
              align-items: center;
              max-width: 340px;
            "
          >
            <div class="info-output">
              <div>Last Game Score</div>
              <div id="game-score">0</div>
            </div>
            <div class="info-output">
              <div>Adherance Score</div>
              <div id="adherance-score">0</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</html>
